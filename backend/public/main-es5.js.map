{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/api.service.ts","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","ApiService","http","uuid","post","pipe","res","data","headers","menu","providedIn","routes","AppRoutingModule","forRoot","imports","AppComponent","apiService","cdr","nzContextMenuService","title","noteModal","nodes","baseNodeTitle","addNodeModal","menuName","note","notes","editingNote","content","noteEditModal","nodeEditModal","travelUser","subscribe","console","log","map","node","name","key","event","isExpanded","activatedNode","getChildren","mid","items","markForCheck","contextNode","addChildren","addMenu","pid","concat","orderid","nzTree","getTreeNodeByKey","$event","preventDefault","stopPropagation","create","menu2","contextMenu","contextNote","previousIndex","currentIndex","close","addChildItem","index","findIndex","n","origin","mode","copyMode","cacheCopyNode","cacheCopyNote","copyNestNode","copyNode","selected","children","forEach","child","copyNote","refreshNotes","pasteNote","remove","editingIndex","updateItem","itemid","i","activeNode","getParentNode","filter","deleteMenu","deleteItem","updateMenu","dropNode","openFolder","showAddNodeModal","showAddNoteModal","editNode","copy","paste","deleteNode","handleCancel","addNote","saveNote","addBaseNode","saveNode","selector","templateUrl","styleUrls","icons","AppModule","provide","useValue","declarations","providers","bootstrap","environment","production","bootstrapModule","err","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import {Injectable} from '@angular/core';\nimport {HttpClient, HttpHeaders, HttpParams, HttpUrlEncodingCodec} from '@angular/common/http';\nimport {map} from 'rxjs/operators';\n\nexport interface AnyObject {\n  [x: string]: any;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n\n  constructor(private http: HttpClient) {\n\n  }\n\n  uuid = '';\n\n\n  travelUser(id: string = 'xiao_hu_li') {\n    return this.http.post(`http://ppssii.com/api/auth/makeUuid`, {}).pipe(map((res: AnyObject) => res.data));\n  }\n\n  content() {\n    const headers = new HttpHeaders({'Content-Type': 'application/json', uuid: this.uuid});\n    return this.http.post('http://ppssii.com/api/menu/list', {}, {headers}).pipe(map((res: AnyObject) => res.data));\n  }\n\n  addMenu(menu) {\n    const headers = new HttpHeaders({'Content-Type': 'application/json', uuid: this.uuid});\n    return this.http.post('http://ppssii.com/api/menu/addMenu', menu, {headers}).pipe(map((res: AnyObject) => res.data));\n  }\n\n  addChildItem(menu) {\n    const headers = new HttpHeaders({'Content-Type': 'application/json', uuid: this.uuid});\n    return this.http.post('http://ppssii.com/api/menu/addItem', menu, {headers}).pipe(map((res: AnyObject) => res.data));\n  }\n\n  getChildren(menu) {\n    const headers = new HttpHeaders({'Content-Type': 'application/json', uuid: this.uuid});\n    return this.http.post('http://ppssii.com/api/menu/menuItem', menu, {headers}).pipe(map((res: AnyObject) => res.data));\n  }\n\n  deleteMenu(menu) {\n    const headers = new HttpHeaders({'Content-Type': 'application/json', uuid: this.uuid});\n    return this.http.post('http://ppssii.com/api/menu/delMenu', menu, {headers}).pipe(map((res: AnyObject) => res.data));\n  }\n\n  deleteItem(menu) {\n    const headers = new HttpHeaders({'Content-Type': 'application/json', uuid: this.uuid});\n    return this.http.post('http://ppssii.com/api/menu/delItem', menu, {headers}).pipe(map((res: AnyObject) => res.data));\n  }\n\n  updateItem(menu) {\n    const headers = new HttpHeaders({'Content-Type': 'application/json', uuid: this.uuid});\n    return this.http.post('http://ppssii.com/api/menu/updateItem', menu, {headers}).pipe(map((res: AnyObject) => res.data));\n  }\n\n  updateMenu(menu) {\n    const headers = new HttpHeaders({'Content-Type': 'application/json', uuid: this.uuid});\n    return this.http.post('http://ppssii.com/api/menu/updateMenu', menu, {headers}).pipe(map((res: AnyObject) => res.data));\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import {ChangeDetectorRef, Component, OnInit, ViewChild} from '@angular/core';\nimport {\n  NzContextMenuService,\n  NzDropdownMenuComponent,\n  NzFormatEmitEvent,\n  NzTreeComponent,\n  NzTreeNode,\n  NzTreeNodeOptions\n} from 'ng-zorro-antd';\nimport {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\nimport {HttpClient} from '@angular/common/http';\nimport {ApiService} from './api.service';\nimport {v4 as uuidv4} from 'uuid';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  title = 'online-note';\n  noteModal = false;\n\n  nodes = [];\n  baseNodeTitle = '';\n  activatedNode: NzTreeNode;\n  contextNote;\n  addNodeModal = false;\n  contextNode;\n  copyNode;\n  copyNote;\n  copyMode;\n  menuName = '';\n  note = '';\n  notes = [];\n  editingNote = {content: '', id: ''};\n  editingIndex;\n  noteEditModal = false;\n\n  @ViewChild('tree') nzTree: NzTreeComponent;\n  nodeEditModal = false;\n\n  constructor(\n    private apiService: ApiService,\n    private cdr: ChangeDetectorRef,\n    private nzContextMenuService: NzContextMenuService) {\n  }\n\n\n  // 初始化\n  ngOnInit(): void {\n    this.apiService.travelUser().subscribe(data => {\n      this.apiService.uuid = '595e5228-f75a-43de-ba92-6bdedfbc4707';\n      this.apiService.content().subscribe(res => {\n        const nodes = res;\n        console.log(nodes);\n        this.nodes = nodes.map(node => {\n          return {title: node.name, key: node.id, notes: []};\n        });\n      });\n    });\n  }\n\n\n  nzEvent(event: NzFormatEmitEvent): void {\n    console.log(event);\n  }\n\n\n  // 打开目录\n  openFolder(data: NzTreeNode | NzFormatEmitEvent): void {\n    // do something if u want\n    if (data instanceof NzTreeNode) {\n      data.isExpanded = !data.isExpanded;\n    } else {\n      const node = data.node;\n      if (node) {\n        node.isExpanded = !node.isExpanded;\n      }\n    }\n  }\n\n  // 选中节点\n  activeNode(data: NzFormatEmitEvent): void {\n    this.activatedNode = data.node;\n    this.notes = [];\n    this.apiService.getChildren({\n      mid: data.node.key\n    }).subscribe(data => {\n      this.notes = data.items;\n    });\n    this.cdr.markForCheck();\n  }\n\n\n  // 添加目录\n  addBaseNode() {\n\n    this.addNodeModal = false;\n    const uuid = uuidv4();\n    if (this.contextNode) {\n      this.contextNode.addChildren([\n        {\n          title: this.baseNodeTitle,\n          key: uuid,\n          notes: []\n        }\n      ]);\n      this.apiService.addMenu({\n        pid: this.contextNode.key,\n        name: this.baseNodeTitle\n      }).subscribe(data => {\n        console.log(data);\n      });\n    } else {\n      this.nodes = this.nodes.concat({\n        title: this.baseNodeTitle,\n        key: uuid,\n        notes: []\n      });\n      this.apiService.addMenu({\n        name: this.baseNodeTitle,\n        orderid: 0,\n        pid: 0\n      }).subscribe(data => {\n        const node = this.nzTree.getTreeNodeByKey(uuid);\n        node.key = data.id;\n        console.log(data);\n      });\n    }\n\n  }\n\n  // 右键单击出现菜单\n  contextMenu($event: MouseEvent, menu: NzDropdownMenuComponent): void {\n    $event.preventDefault();\n    $event.stopPropagation();\n    this.nzContextMenuService.create($event, menu);\n  }\n\n  // 笔记菜单\n  contextNoteMenu($event: MouseEvent, menu2: NzDropdownMenuComponent, note: any) {\n    this.contextMenu($event, menu2);\n    this.contextNote = note;\n  }\n\n  selectDropdown(): void {\n\n  }\n\n\n  // 拖拽放置\n  drop(event: CdkDragDrop<string[]>) {\n    moveItemInArray(this.notes, event.previousIndex, event.currentIndex);\n  }\n\n  // 放置节点\n  dropNode($event: NzFormatEmitEvent) {\n    console.log('drop');\n  }\n\n\n  closeMenu(): void {\n    this.nzContextMenuService.close();\n  }\n\n\n  // 关闭弹出框\n  handleCancel(): void {\n    this.noteModal = false;\n    this.note = '';\n    this.baseNodeTitle = '';\n    this.addNodeModal = false;\n    this.noteEditModal = false;\n  }\n\n  // 添加笔记\n  addNote(): void {\n    const uuid = uuidv4();\n    this.notes = this.notes.concat([{\n      content: this.note,\n      id: uuid\n    }]);\n    // this.refreshNotes();\n    this.noteModal = false;\n    this.apiService.addChildItem({\n      mid: this.contextNode.key,\n      content: this.note\n    }).subscribe(data => {\n      const index = this.notes.findIndex(n => n.id === uuid);\n      this.notes[index] = data;\n      console.log(this.contextNode);\n    });\n    this.note = '';\n  }\n\n  // 显示目录弹出框\n  showAddNodeModal() {\n    this.addNodeModal = true;\n    this.baseNodeTitle = '';\n  }\n\n  // 显示笔记弹出框\n  showAddNoteModal() {\n    this.noteModal = true;\n    this.note = '';\n  }\n\n  // 刷新笔记\n  refreshNotes() {\n    this.notes = [...this.activatedNode.origin.notes];\n  }\n\n  // 显示节点菜单\n  showNodeMenu($event: MouseEvent, menu: NzDropdownMenuComponent, node: NzTreeNode): void {\n    $event.preventDefault();\n    $event.stopPropagation();\n    this.nzContextMenuService.create($event, menu);\n    this.contextNode = node;\n  }\n\n  // 复制\n  copy(mode = 'node') {\n    this.copyMode = mode;\n    if (this.copyMode === 'node') {\n      this.cacheCopyNode();\n    } else if (this.copyMode === 'note') {\n      this.cacheCopyNote(this.contextNote);\n    }\n  }\n\n  // 缓存复制的目录\n  cacheCopyNode() {\n    const origin = this.contextNode.origin;\n    this.copyNestNode(origin);\n    this.copyNode = {...origin};\n  }\n\n  // 递归复制节点\n  copyNestNode(node: NzTreeNodeOptions): void {\n    node.key = uuidv4();\n    node.selected = false;\n    (node.children || []).forEach(child => {\n      this.copyNestNode(child);\n    });\n  }\n\n  // 缓存复制的笔记\n  cacheCopyNote(note) {\n    this.copyNote = note;\n  }\n\n  // 粘贴笔记\n  pasteNote() {\n    this.contextNode.origin.notes = this.contextNode.origin.notes.concat(this.copyNote);\n    this.refreshNotes();\n  }\n\n  // 粘贴节点\n  paste() {\n    // 再更新一次key\n    if (this.copyMode === 'node') {\n      this.copyNestNode(this.copyNode);\n      this.contextNode.addChildren([{...this.copyNode}]);\n    } else if (this.copyMode === 'note') {\n      this.pasteNote();\n    }\n\n  }\n\n  // 删除节点\n  removeNode(node: NzTreeNode) {\n    node.remove();\n    this.notes = this.activatedNode.getChildren();\n  }\n\n  // 编辑保存笔记\n  saveNote() {\n    this.activatedNode.origin.notes[this.editingIndex] = this.editingNote;\n    this.noteEditModal = false;\n    this.apiService.updateItem({\n      itemid: this.editingNote.id,\n      content: this.editingNote.content\n    }).subscribe(data => {\n      console.log(data);\n    });\n  }\n\n  // 编辑选中笔记\n  editNote(note: any, i: number) {\n    this.editingNote = note;\n    this.editingIndex = i;\n    this.noteEditModal = true;\n  }\n\n  // 删除节点\n  deleteNode(): void {\n    const activeNode = this.nzTree.getTreeNodeByKey(this.contextNode.key);\n    activeNode.remove();\n    if (!activeNode.getParentNode()) {\n      this.nodes = this.nodes.filter(node => node.key !== activeNode.key);\n    }\n    this.apiService.deleteMenu({mid: activeNode.key}).subscribe(data => {\n      console.log(data);\n    });\n  }\n\n  // 删除笔记\n  deleteNote(note): void {\n    this.notes = this.notes.filter(n => note.id !== n.id);\n    this.apiService.deleteItem({\n      itemid: note.id\n    }).subscribe(data => {\n      console.log(data);\n    });\n  }\n\n  // 保存节点\n  saveNode() {\n    this.contextNode.title = this.menuName;\n    this.nodeEditModal = false;\n    this.apiService.updateMenu({\n      mid: this.contextNode.key,\n      name: this.menuName\n    }).subscribe(data => {\n      console.log(data);\n    });\n  }\n\n  // 编辑节点\n  editNode() {\n    this.nodeEditModal = true;\n  }\n}\n","<div style=\"width: 1444px;margin: 0px auto\">\n  <nz-layout>\n    <nz-header style=\"background: white\">在线记事本</nz-header>\n    <nz-layout>\n      <nz-sider [nzWidth]=\"400\" nzTheme=\"light\">\n        <nz-card class=\"node-card\" (contextmenu)=\"contextMenu($event, addMenu)\">\n          <!--          添加新的文件夹-->\n          <nz-dropdown-menu #addMenu=\"nzDropdownMenu\">\n            <ul nz-menu style=\"width: 200px\">\n              <li nz-menu-item (click)=\"addNodeModal = true\">新建文件夹</li>\n            </ul>\n          </nz-dropdown-menu>\n          <nz-empty *ngIf=\"nodes.length === 0\"></nz-empty>\n          <nz-tree\n            nzBlockNode\n            [nzData]=\"nodes\"\n            nzDraggable\n            #tree\n            (nzClick)=\"activeNode($event)\"\n            (nzOnDrop)=\"dropNode($event)\"\n            [nzSelectedKeys]=\"['x']\"\n            (nzDblClick)=\"openFolder($event)\"\n            [nzTreeTemplate]=\"nzTreeTemplate\"\n          ></nz-tree>\n          <ng-template #nzTreeTemplate let-node let-origin=\"origin\">\n      <span class=\"custom-node\">\n        <span *ngIf=\"!node.isLeaf\" (contextmenu)=\"showNodeMenu($event, menu,node)\">\n          <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\" (click)=\"openFolder(node)\"></i>\n          <span class=\"folder-name\">{{ node.title }}</span>\n        </span>\n        <!--        <span *ngIf=\"node.isLeaf\" (contextmenu)=\"contextMenu($event, menu)\">-->\n        <!--          <i nz-icon nzType=\"file\"></i>-->\n        <!--          <span class=\"file-name\">{{ node.title }}</span>-->\n        <!--        </span>-->\n      </span>\n          </ng-template>\n          <nz-dropdown-menu #menu=\"nzDropdownMenu\">\n            <ul nz-menu style=\"width: 200px\">\n              <li nz-menu-item (click)=\"showAddNodeModal()\">新建文件夹</li>\n              <li nz-menu-item (click)=\"showAddNoteModal()\">新建笔记</li>\n              <li nz-menu-item><a (click)=\"editNode()\">编辑</a></li>\n              <li nz-menu-item (click)=\"copy('node')\">复制</li>\n              <li nz-menu-item (click)=\"paste()\">粘贴</li>\n              <li nz-menu-item (click)=\"deleteNode()\">删除</li>\n            </ul>\n          </nz-dropdown-menu>\n        </nz-card>\n      </nz-sider>\n      <nz-content>\n        <nz-card class=\"node-card\">\n          <nz-list *ngIf=\"activatedNode\" (contextmenu)=\"contextMenu($event, menu3)\"\n                   nzSize=\"small\"\n                   (cdkDropListDropped)=\"drop($event)\"\n                   cdkDropList nzBordered nzHeader=\"文件夹-{{activatedNode?.title}}\" nzFooter=\"\">\n            <nz-list-item class=\"example-box\" *ngFor=\"let note of notes;let i = index\" cdkDrag\n                          (contextmenu)=\"contextNoteMenu($event, menu2,note)\">{{note.content}}\n              <ul class=\"ant-list-item-action\">\n                <li><a (click)=\"editNote(note,i)\">编辑</a></li>\n                <li><a (click)=\"deleteNote(note)\">删除</a></li>\n              </ul>\n            </nz-list-item>\n          </nz-list>\n          <nz-empty *ngIf=\"!activatedNode\"></nz-empty>\n\n        </nz-card>\n      </nz-content>\n    </nz-layout>\n\n  </nz-layout>\n</div>\n\n\n<nz-dropdown-menu #menu2=\"nzDropdownMenu\">\n  <ul nz-menu>\n    <li nz-menu-item (click)=\"copy('note')\">复制</li>\n    <li nz-menu-item nzDisabled>删除</li>\n  </ul>\n</nz-dropdown-menu>\n\n<nz-dropdown-menu #menu3=\"nzDropdownMenu\">\n  <ul nz-menu style=\"width: 200px\">\n    <li nz-menu-item>新建</li>\n    <li nz-menu-item>粘贴</li>\n  </ul>\n</nz-dropdown-menu>\n\n\n<nz-modal [(nzVisible)]=\"noteModal\" nzTitle=\"添加笔记\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"addNote()\">\n  <nz-form-item>\n    <nz-form-control [nzSpan]=\"24\">\n      <textarea nz-input placeholder=\"输入笔记\" nzAutosize [(ngModel)]=\"note\"></textarea>\n    </nz-form-control>\n  </nz-form-item>\n\n</nz-modal>\n\n<nz-modal [(nzVisible)]=\"noteEditModal\" nzTitle=\"编辑笔记\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"saveNote()\">\n  <nz-form-item>\n    <nz-form-control [nzSpan]=\"24\">\n      <textarea nz-input placeholder=\"输入笔记\" nzAutosize [(ngModel)]=\"editingNote.content\"></textarea>\n    </nz-form-control>\n  </nz-form-item>\n\n</nz-modal>\n\n<nz-modal [(nzVisible)]=\"addNodeModal\" nzTitle=\"新建文件夹\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"addBaseNode()\">\n  <nz-form-item>\n    <nz-form-control [nzSpan]=\"24\">\n      <nz-input-group nzPrefixIcon=\"snippets\">\n        <input type=\"text\" nz-input placeholder=\"文件名称\" [(ngModel)]=\"baseNodeTitle\"/>\n      </nz-input-group>\n    </nz-form-control>\n  </nz-form-item>\n</nz-modal>\n\n<nz-modal [(nzVisible)]=\"nodeEditModal\" nzTitle=\"编辑菜单\" (nzOnCancel)=\"handleCancel()\" (nzOnOk)=\"saveNode()\">\n  <nz-form-item>\n    <nz-form-control [nzSpan]=\"24\">\n      <nz-input-group nzPrefixIcon=\"snippets\">\n        <input type=\"text\" nz-input placeholder=\"文件名称\" [(ngModel)]=\"menuName\"/>\n      </nz-input-group>\n    </nz-form-control>\n  </nz-form-item>\n\n</nz-modal>\n","import {BrowserModule} from '@angular/platform-browser';\nimport {NgModule} from '@angular/core';\n\nimport {AppRoutingModule} from './app-routing.module';\nimport {AppComponent} from './app.component';\nimport {FormsModule} from '@angular/forms';\nimport {HttpClientModule} from '@angular/common/http';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {NZ_I18N} from 'ng-zorro-antd/i18n';\nimport {zh_CN} from 'ng-zorro-antd/i18n';\nimport {registerLocaleData} from '@angular/common';\nimport zh from '@angular/common/locales/zh';\nimport {\n  NzCardModule,\n  NzDropDownModule,\n  NzEmptyModule,\n  NzGridModule,\n  NzIconModule, NzInputModule,\n  NzLayoutModule, NzListModule,\n  NzModalModule,\n  NzTreeModule\n} from 'ng-zorro-antd';\nimport {IconDefinition} from '@ant-design/icons-angular';\n\nimport {\n  AccountBookFill, AlertFill, SnippetsOutline,\n  FileOutline, FolderOutline, FolderOpenOutline,\n  AlertOutline\n} from '@ant-design/icons-angular/icons';\nimport {DragDropModule} from '@angular/cdk/drag-drop';\n\nconst icons: IconDefinition[] = [AccountBookFill, SnippetsOutline, FileOutline, FolderOutline, FolderOpenOutline,\n  AlertOutline, AlertFill];\n\nregisterLocaleData(zh);\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    DragDropModule,\n    HttpClientModule,\n    AppRoutingModule,\n    NzTreeModule,\n    FormsModule,\n    HttpClientModule,\n    BrowserAnimationsModule,\n    NzGridModule,\n    NzDropDownModule,\n    NzIconModule.forRoot(icons),\n    NzCardModule,\n    NzLayoutModule,\n    NzModalModule,\n    NzEmptyModule,\n    NzInputModule,\n    NzListModule\n  ],\n  providers: [{provide: NZ_I18N, useValue: zh_CN}],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}